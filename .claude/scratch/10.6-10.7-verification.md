# Verification: 10.6-10.7

## Algorithm Compliance

| Spec Step | Implementation Line | Test Case | Hardcoded? |
|-----------|---------------------|-----------|------------|
| 10.6.1 [[ready promise]] | image-track-list.ts:18-33 | ready promise resolves to undefined | NO |
| 10.6.1 [[track list]] | image-track-list.ts:17 | length matches number of tracks | NO |
| 10.6.1 [[selected index]] | Computed dynamically | selectedIndex tests | NO |
| 10.6.2 ready getter | image-track-list.ts:45-47 | ready promise resolves | NO |
| 10.6.2 length getter | image-track-list.ts:49-51 | length matches tracks | NO |
| 10.6.2 selectedIndex getter | image-track-list.ts:53-60 | selectedIndex tests | NO |
| 10.6.2 selectedTrack getter | image-track-list.ts:62-65 | selectedTrack null when -1 | NO |
| 10.6.2 index getter | image-track-list.ts:36-42 | out-of-bounds returns undefined | NO |
| 10.7.1 [[animated]] | image-track.ts:36 | animated false for static | NO |
| 10.7.1 [[frame count]] | image-track.ts:38 | frameCount is 1 for static | NO |
| 10.7.1 [[repetition count]] | image-track.ts:40 | repetitionCount is Infinity | NO |
| 10.7.1 [[selected]] | image-track.ts:42 | selected getter/setter | NO |
| 10.7.1 [[ImageDecoder]] | image-track.ts:44 | closed decoder no-op | NO |
| 10.7.1 [[ImageTrackList]] | image-track.ts:46 | track list reference | NO |
| 10.7.2 selected setter step 1 | image-track.ts:75-78 | closed decoder is no-op | NO |
| 10.7.2 selected setter step 3 | image-track.ts:83-86 | same value is no-op | NO |
| 10.7.2 selected setter step 4 | image-track.ts:88-89 | assigns new value | NO |

## Generalization Check

For each test input, answer: "Would a DIFFERENT valid input also work?"

| Test Input | Would 2x value work? | Would edge value work? |
|------------|----------------------|------------------------|
| PNG 1x1 | YES: any size works | YES: any valid PNG |
| GIF static | YES: any static GIF | YES: any single-frame |
| GIF animated 2 frames | YES: 10 frames works | YES: any multi-frame |
| loopCount 0 (infinite) | N/A | YES: returns Infinity |
| loopCount 3 (finite) | YES: 10 works | YES: any positive |

## Error Message Compliance

| Spec Error | Spec Message | Implementation Message | MATCH? |
|------------|--------------|------------------------|--------|
| No explicit errors in 10.6-10.7 | N/A | N/A | N/A |

Note: The spec for ImageTrack.selected setter (10.7.2 step 1) says "abort these steps" when decoder is closed - no error is thrown, just a no-op. Implementation correctly returns early without throwing.

## C++ Safety (not applicable)

This task only modifies TypeScript files:
- lib/image-track.ts
- lib/image-decoder.ts
- test/golden/image-decoder.test.ts

No C++ changes required.

## TypeScript Safety

- [x] No `any` type used
- [x] Proper type imports (`import type`)
- [x] Callback type properly defined (`DecoderClosedChecker`)
- [x] Null checks with optional chaining (`_isDecoderClosed?.()`)

## Test Coverage Summary

| Category | Count | All Pass? |
|----------|-------|-----------|
| ImageTrackList tests | 6 | YES |
| ImageTrack tests | 10 | YES |
| Algorithm steps covered | 17 | YES |
| Error conditions | 1 (abort on closed) | YES |
| Edge cases (static/animated) | 5 | YES |
