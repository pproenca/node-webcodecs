# 4.3 Handoff: VideoDecoder Attributes

## Status: COMPLETE

## Spec Compliance Mapping

| Spec Section | Attribute | Type | Implementation | Test |
|--------------|-----------|------|----------------|------|
| 4.3 | state | CodecState (readonly) | video-decoder.ts:67-69 | state tests |
| 4.3 | decodeQueueSize | unsigned long (readonly) | video-decoder.ts:71-73 | decodeQueueSize tests |
| 4.3 | ondequeue | EventHandler | codec-base.ts:16-22 | ondequeue tests |

## Test Coverage

| Category | Count | All Pass? |
|----------|-------|-----------|
| state attribute (readonly) | 5 | YES |
| decodeQueueSize attribute (readonly) | 4 | YES |
| ondequeue event handler | 6 | YES |
| EventTarget inheritance | 2 | YES |
| **Total** | **17** | **YES** |

## Tests Added

`test/unit/video-decoder-attributes.test.ts`:

**state attribute (readonly):**
- should be "unconfigured" after construction
- should be "configured" after configure()
- should be "closed" after close()
- should be readonly (no setter)
- should reflect state changes through transitions

**decodeQueueSize attribute (readonly):**
- should be 0 after construction
- should be readonly (no setter)
- should increase on decode()
- should be 0 after reset()

**ondequeue event handler:**
- should be null by default
- should be settable to a function
- should be settable to null
- should fire when decodeQueueSize decreases
- should work with addEventListener
- should not throw if ondequeue is not set

**EventTarget inheritance:**
- should extend EventTarget
- should support removeEventListener

## Implementation Notes

The implementation was already complete:
- `state` getter returns `this._native.state`
- `decodeQueueSize` getter returns `this._decodeQueueSize`
- `ondequeue` getter/setter inherited from `CodecBase`
- `CodecBase._triggerDequeue()` fires both addEventListener events and legacy callback

## Files Modified

- `test/unit/video-decoder-attributes.test.ts`: New test file with 17 tests

## Downstream Unblocked

- TODO-4.5: Methods modify attributes
