# 4.4 Handoff: VideoDecoder Event Summary

## Status: COMPLETE

## Spec Compliance Mapping

| Spec Section | Event | When Fired | Implementation | Test |
|--------------|-------|------------|----------------|------|
| 4.4 | dequeue | decodeQueueSize decreases | video-decoder.ts:58 via _triggerDequeue() | dequeue event tests |

## Test Coverage

| Category | Count | All Pass? |
|----------|-------|-----------|
| dequeue event firing | 3 | YES |
| event edge cases | 3 | YES |
| EventTarget integration | 2 | YES |
| **Total** | **8** | **YES** |

## Tests Added

`test/unit/video-decoder-events.test.ts`:

**dequeue event firing:**
- should fire dequeue event with Event object
- should fire dequeue after flush completes
- should call ondequeue handler with Event object

**event edge cases:**
- should handle no handler set gracefully
- should handle handler removed mid-operation
- should not fire dequeue after close

**EventTarget integration:**
- should dispatch to multiple listeners
- should support once option

## Implementation Notes

The implementation was already complete:
- `VideoDecoder._triggerDequeue()` is called in output callback (line 58)
- `CodecBase._triggerDequeue()` dispatches Event via EventTarget and calls legacy ondequeue
- Event coalescing is handled by the event loop (events fire asynchronously)

## Files Modified

- `test/unit/video-decoder-events.test.ts`: New test file with 8 tests

## Downstream Unblocked

- None (events are final output)
