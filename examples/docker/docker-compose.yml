services:
  # Run all demos with web UI
  demo:
    build:
      context: ../..
      dockerfile: examples/docker/Dockerfile
    ports:
      - "3000:3000"
    volumes:
      - demo-output:/app/examples/output
    command: ["node", "run-all.js", "--with-server"]

  # Run demos without web UI (console only)
  demo-console:
    build:
      context: ../..
      dockerfile: examples/docker/Dockerfile
    volumes:
      - demo-output:/app/examples/output
    command: ["node", "run-all.js"]

  # Interactive shell for exploration
  shell:
    build:
      context: ../..
      dockerfile: examples/docker/Dockerfile
    stdin_open: true
    tty: true
    volumes:
      - demo-output:/app/examples/output
    command: ["/bin/bash"]

  # Web UI server only (assumes demos already ran)
  web:
    build:
      context: ../..
      dockerfile: examples/docker/Dockerfile
    ports:
      - "3000:3000"
    volumes:
      - demo-output:/app/examples/output
    command: ["node", "web-ui/server.js"]

volumes:
  demo-output:
